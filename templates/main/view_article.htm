{% extends "layouts/user_base.htm" %}
{% block title %}Home{% endblock %}
{% block content %}
<div class="container-fluid">
    <!-- flash messages -->

    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
        {% for category, message in messages %}
        <div class="alert alert-danger" role="alert">
            {{ message }}
            
        </div>
        {% endfor %}
        {% endif %}
    {% endwith %}

    <div class="container">
        <a class="text-dark" href="{{ url_for('article') }}"><small>← return back to previous page</small></a>
        <br><br>
        <div> 
            <!-- item type -->
            {% if article_item[5].lower() == "health" %}
            <p class="text-white border border-white rounded bg-danger p-2"><em><small>{{article_item[5]}}</small></em></p>
            {% endif %}
            {% if article_item[5].lower() == "politics" %}
            <p class="text-white border border-white rounded bg-success p-2"><em><small>{{article_item[5]}}</small></em></p>
            {% endif %}
            {% if article_item[5].lower() == "business" %}
            <p class="text-white border border-white rounded bg-primary p-2"><em><small>{{article_item[5]}}</small></em></p>
            {% endif %}
        </div>
        <h3 class="card-title">{{ article_item[0] }}</h3>
        <div class="d-flex justify-content-between">
            <!-- article url -->
            <a href="{{ article_item[2] }}" target="_blank">{{ article_item[2] }}</a>
            <!-- article date -->
            <span><strong>{{ article_item[1] }}</strong></span>
        </div>
        <div class="container p-3 my-3 border item">
            <div>
                <div class="article_item">
                    <!-- article -->
                    {{ article_item[4] }}
                </div>
                <br>
                <div>
                    <!-- source item-->
                    <div class="all_item">
                        <span>Source:<em class="text-danger"> {{ article_item[6] }}</em></span>
                        <!-- sentimental analysis rating -->
                        <p>Sentimental Rating: {% if (article_item[3] < 0): %}
                                                <em class="text-danger">{{ article_item[3] }}</em>
                                                {% else: %}
                                                <em class="text-info">{{ article_item[3] }}</em>     
                                                {% endif %}
                        </p>
                    </div>
                    
                    <!-- like item -->
                    <!-- <button type="button" class="btn btn-danger" class="like_btn" id="like_btn">❤ Unlike this Article</button> -->
                    <!-- {{ check_like }} -->
                    {% if (check_like)  %}
                    <form method="POST" action={{ url_for('view_article') }}>
                        <input type="text" id="post_item" name="text" value="{{ article_id }}">
                        <input type="submit" class="btn btn-danger" class="like_btn" id="like_btn" value="❤ Unlike this Article">
                    </form>
                    {% else: %}
                    <form method="POST" action={{ url_for('view_article') }}>
                        <input type="text" id="post_item" name="text" value="{{ article_id }}">
                        <input type="submit" class="btn btn-danger" class="like_btn" id="like_btn" value="❤ Like this Article">
                    </form>
                    {% endif %}
            </div>
        </div>
    </div>
</div>
<!-- <script>
    $('#like_btn').click(function(){
    var $this = $(this);
    $this.toggleClass('like_btn');
    if($this.hasClass('like_btn')){
        $this.text('❤ Unlike this Article');
    } else {
        $this.text('❤ Like this Article');
    }
});
</script> -->
{% endblock %}